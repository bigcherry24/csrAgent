<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CSR Detail Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }

        .container {
            background-color: #fff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 20px auto;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        select,
        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            display: block;
            width: 100%;
        }

        button:hover {
            background-color: #0056b3;
        }

        .log-area {
            margin-top: 30px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }

        .log-area p {
            margin: 5px 0;
            color: #343a40;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>CSR 상세 정보 (테스트 페이지)</h1>

        <div class="form-group">
            <label for="csrTitle">CSR 제목:</label>
            <input type="text" id="csrTitle" value="테스트 CSR 요청" readonly>
        </div>

        <div class="form-group">
            <label for="requestType">요청 유형:</label>
            <select id="requestType">
                <option value="">선택하세요</option>
                <option value="general">일반 요청</option>
                <option value="bug">버그 리포트</option>
                <option value="feature">기능 개선</option>
            </select>
        </div>

        <div class="form-group">
            <label for="systemSearch">시스템 명 검색:</label>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="systemSearch" placeholder="시스템 명을 입력하세요 (예: HMP)">
                <button type="button" id="searchSystemBtn" style="width: auto; margin-top: 0;">검색</button>
            </div>
            <p id="systemSearchResult" style="margin-top: 5px; font-size: 0.9em; color: gray;"></p>
        </div>

        <div class="form-group">
            <label for="handler">처리 담당자:</label>
            <select name="handler" id="handler">
                <option value="">선택하세요</option>
                <option value="user123">김철수</option>
                <option value="user456">이영희</option>
                <option value="user789">박민수</option>
            </select>
        </div>

        <button id="saveButton">저장</button>

        <div class="log-area">
            <h3>로그:</h3>
            <p id="logMessage">Extension 액션을 기다립니다...</p>
        </div>
    </div>

    <script>
        document.getElementById('saveButton').addEventListener('click', function () {
            const requestType = document.getElementById('requestType').value;
            const handler = document.getElementById('handler').value;
            const logMessage = document.getElementById('logMessage');

            if (requestType && handler) {
                logMessage.innerHTML = `<b>저장 성공!</b><br>요청 유형: <b>${requestType}</b><br>처리 담당자: <b>${handler}</b>`;
                logMessage.style.color = 'green';
            } else {
                logMessage.innerHTML = `<b>저장 실패:</b> 요청 유형 또는 처리 담당자를 선택해주세요.`;
                logMessage.style.color = 'red';
            }
        });

        // Simulate event dispatch when values change to reflect what a real ITSM might do
        document.getElementById('requestType').addEventListener('change', function () {
            console.log(`Test Page: Request Type changed to ${this.value}`);
        });
        document.getElementById('handler').addEventListener('change', function () {
            console.log(`Test Page: Handler changed to ${this.value}`);
        });

        // Simulate System Search
        document.getElementById('searchSystemBtn').addEventListener('click', function () {
            const query = document.getElementById('systemSearch').value;
            const resultMsg = document.getElementById('systemSearchResult');
            if (query && query.toUpperCase() === 'HMP') {
                resultMsg.textContent = "시스템 확인됨: HMP (Health Management Platform)";
                resultMsg.style.color = "green";
            } else {
                resultMsg.textContent = "시스템을 찾을 수 없습니다.";
                resultMsg.style.color = "red";
            }
        });

        console.log("Test ITSM page loaded.");
    </script>
</body>

</html>